function CartCount(){$(".cartCount").empty();var t=0;if(null!=cart)for(var e=0;e<cart.length;e++)t=t+=parseInt(cart[e].quantity);else t=0;$(".cartCount").text(t)}function PriceCount(){$(".priceCount").empty();e=0;if(null!=cart)for(var t=0;t<cart.length;t++)var e=e+=parseFloat(cart[t].price);else e=0;$(".priceCount").text(e.toFixed(2))}var cart=[],template;$(document).ready(function(){if(template=$("#template").clone(),null===sessionStorage.getItem("items"))$("#cart").append($("<p class='empty'>Your cart is empty</p>").html(a));else{$("#cartTable").css("display","table");for(var t=JSON.parse(sessionStorage.getItem("items")),e=0;e<t.length;e++){var r=$("#template").clone(),a=t[e],c=a.product.replace(/\s/g,"");r.find(".product_title").text(a.product),r.find(".product_quantity").text(a.quantity),r.find(".product_price").text(a.singlePrice),r.find(".sub_price").text(a.price),r.find(".product_description").text(a.description),"noImage"!==a.image&&r.find(".product_image").attr("src",a.image),r.removeAttr("id"),r.addClass(c),$("#CartContainer").append(r),cart.push(a)}}CartCount(),PriceCount(),$("#clear").click(function(){sessionStorage.clear(),$("#cart").empty(),cart=[],$("#cart").append($("<p class='empty'>Your cart is empty</p>")),CartCount(),PriceCount()})}),$(document).on("click",".add",function(t){$("#cartTable").show();var e=$(this).closest(".product").find(".product_image")[0];e=void 0!==e?e.src:"noImage";var r=$(this).closest(".product").find(".product_title").text(),a=parseFloat($(this).closest(".product").find(".product_price").text()).toFixed(2),c=$(this).closest(".product").find(".product_description").text();console.log(c);var i=!1,o=parseFloat(1*a).toFixed(2);if(0!==cart.length)for(p=0;p<cart.length;p++)if(cart[p].product===r){i=!0;break}var n=r.replace(/\s/g,"");if(!0===i){for(var p=0;p<cart.length;p++)if(cart[p].product===r){var s=Number(cart[p].quantity),d=parseFloat(cart[p].price).toFixed(2),u=parseInt(s)+1,l=Number(d)+Number(o),l=parseFloat(l).toFixed(2);cart[p].price=l,cart[p].quantity=u,$("."+n).find(".sub_price").text(l),$("."+n).find(".product_quantity").text(u);break}sessionStorage.setItem("items",JSON.stringify(cart))}else{cart.push({product:r,quantity:1,singlePrice:a,price:o,image:e,description:c}),sessionStorage.setItem("items",JSON.stringify(cart)),$(".empty").remove();var f=$("#template").clone();f.find(".product_title").text(r),f.find(".product_quantity").text(1),f.find(".product_price").text(a),f.find(".sub_price").text(a),f.find(".product_description").text(c),"noImage"!==e&&f.find(".product_image").attr("src",e),f.removeAttr("id"),f.addClass(n),$("#CartContainer").append(f)}CartCount(),PriceCount()}),$(document).on("click",".remove",function(t){var e=$(this).closest(".product").find(".product_title").text(),r=parseFloat($(this).closest(".product").find(".product_price").text()).toFixed(2),a=!1;if(0!==cart.length)for(c=0;c<cart.length;c++)if(cart[c].product===e){a=!0;break}if(!0===a){for(var c=0;c<cart.length;c++)if(cart[c].product===e){var i=parseInt(cart[c].quantity)-1,o=cart[c].product.replace(/\s/g,""),n=parseFloat(cart[c].price).toFixed(2),p=Number(n)-Number(r),p=parseFloat(p).toFixed(2);i>0?(cart[c].quantity=i,cart[c].price=p,$("."+o).find(".sub_price").text(p),$("."+o).find(".product_quantity").text(i)):(cart.splice(c,1),$("."+o).remove())}sessionStorage.setItem("items",JSON.stringify(cart))}0===cart.length&&0==$(".empty").length&&(sessionStorage.clear(),$("#cartTable").hide(),$("#CartContainer").hide(),$("#cart").append($("<p class='empty'>Your cart is empty</p>"))),CartCount(),PriceCount()});
